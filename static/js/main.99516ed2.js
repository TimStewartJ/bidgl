(()=>{"use strict";var e={6417:(e,t,i)=>{i.r(t),i.d(t,{default:()=>N});var n=i(5861),a=i(885),r=i(5004),l=i(1054),o=i(9385),s=i(4189),d=i(5288),u=i(6792);const f=u.default.create({body:{flex:1,backgroundColor:"#fff",alignItems:"center"},affiliateListStyle:{flexDirection:"row",flexWrap:"wrap",padding:10,gap:10},containerStyle:{alignItems:"center",maxWidth:700}});var c=i(2982),p=i(519),h=i(3408),y=i(7773),g=i(5326),v=i(2629);function m(e){var t=e.location,i=e.onLocationCheck,n=e.checkedAffiliates.some((function(e){return e.id===t.id}));return(0,v.jsx)(o.default,{children:(0,v.jsx)(g.default,{style:function(e){return[{backgroundColor:e.pressed?"rgb(210, 230, 255)":"white"}]},onPress:function(){i(t,!n)},children:(0,v.jsx)(l.default,{style:{color:n?"red":"black"},children:t.name})})})}m.propTypes={location:(0,y.shape)({}).isRequired,onLocationCheck:y.func.isRequired,checkedAffiliates:(0,y.arrayOf)((0,y.shape)({})).isRequired};const x={itemBlacklistKey:"item-blacklist",selectedLocationsKey:"selected-locations",affiliateListKey:"affiliate-list",favoritesKey:"favorites",auctionCollapsedKey:"auction-collapsed",endingTodayKey:"ending-today"};function b(e){var t=e.checkedAffiliates,i=e.updateCheckedAffiliates,l=(0,r.useState)([]),s=(0,a.default)(l,2),d=s[0],u=s[1],y=function(e,t){i((function(i){return function(e,t,i){var n=e;return i?e.every((function(e){return e.id!==t.id}))&&(n=[].concat((0,c.default)(e),[t])):n=e.filter((function(e){return e.id!==t.id})),p.default.setItem(x.selectedLocationsKey,JSON.stringify(n)),n}(i,e,t)}))};return(0,r.useEffect)((function(){var e=function(){var e=(0,n.default)((function*(){try{var e,t=yield p.default.getItem(x.affiliateListKey);null!=t?(e=JSON.parse(t),console.log("Found affiliates in data store!")):yield h.default.get("https://www.bidrl.com/api/auctionfields").then((function(t){e=t.data.affiliates.model,p.default.setItem(x.affiliateListKey,JSON.stringify(e))})),e.sort((function(e,t){return e.name.localeCompare(t.name)})),u(e)}catch(i){console.error(i)}}));return function(){return e.apply(this,arguments)}}();e();var t=function(){var e=(0,n.default)((function*(){var e=JSON.parse(yield p.default.getItem(x.selectedLocationsKey));null!==e&&i(e)}));return function(){return e.apply(this,arguments)}}();t()}),[]),(0,v.jsx)(o.default,{style:f.locationSelectionStyle,children:(0,v.jsx)(o.default,{style:f.affiliateListStyle,children:d.map((function(e){return(0,v.jsx)(m,{location:e,onLocationCheck:y,checkedAffiliates:t},e.id)}))})})}b.propTypes={checkedAffiliates:(0,y.arrayOf)((0,y.shape)({})).isRequired,updateCheckedAffiliates:y.func.isRequired};var j=(0,r.createContext)({message:null,addMessage:function(){},removeMessage:function(){}});function w(e){var t=e.children,i=(0,r.useState)(null),n=(0,a.default)(i,2),l=n[0],o=n[1];return(0,v.jsx)(j.Provider,{value:{message:l,addMessage:(0,r.useCallback)((function(e){return function(e){return o(e)}(e)}),[]),removeMessage:(0,r.useCallback)((function(){return o(null)}),[])},children:t})}w.propTypes={children:(0,y.arrayOf)((0,y.shape)({})).isRequired};var S=function(){var e=(0,r.useContext)(j);return{message:e.message,addMessage:e.addMessage,removeMessage:e.removeMessage}};function k(){var e=S(),t=e.message,i=e.removeMessage;console.log("Message of: "+t);var a=function(){var e=(0,n.default)((function*(){console.log("dismissing notif..."),i()}));return function(){return e.apply(this,arguments)}}();return t&&setTimeout(a,3e3),(0,v.jsx)(o.default,{style:{width:"100",height:"100"},children:(0,v.jsx)(l.default,{style:{position:"fixed"},children:t||""})})}var C=i(376),O=i(5275),I=i(5722),R=i(736);const K=function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()};var T=u.default.create({card:{backgroundColor:"white",borderRadius:16,shadowOpacity:.2,shadowRadius:4,shadowColor:"black",shadowOffset:{height:0,width:0},elevation:1,marginVertical:10,marginHorizontal:10,width:"20%"},thumb:{height:130,borderTopLeftRadius:16,borderTopRightRadius:16,width:"100%"},infoContainer:{padding:16},name:{fontSize:18,fontWeight:"bold"},price:{fontSize:16,fontWeight:"600",marginBottom:8},hyperlinkStyle:{fontSize:22,color:"blue"},collapse:{position:"absolute",width:"10%",right:0,backgroundColor:"red"},favorite:{position:"absolute",width:"10%",left:0,backgroundColor:"green"}});function q(e){var t=e.item,i=e.showImage,n=e.updateCollapsed,a=e.updateFavorites,r=t.item_url||t.url,s=new Date(1e3*(parseInt(t.end_time,10)-t.time_offset)),d=new Date,u=K(d,s);return(0,v.jsxs)(o.default,{style:T.card,children:[(0,v.jsx)(O.default,{style:T.thumb,source:{uri:i?t.images[0].thumb_url:""}}),(0,v.jsxs)(o.default,{children:[(0,v.jsx)(R.default,{onPress:function(){I.default.openURL(r)},children:(0,v.jsx)(l.default,{href:r,style:T.hyperlinkStyle,children:t.title})}),(0,v.jsxs)(l.default,{children:["Current Bid: $",t.current_bid]}),(0,v.jsx)(l.default,{style:{color:u?"red":"black"},children:s.toLocaleDateString()}),(0,v.jsx)(l.default,{children:s.toLocaleTimeString()})]}),(0,v.jsx)(o.default,{style:T.collapse,children:(0,v.jsx)(g.default,{onPress:function(){return n(t.id,!0)},children:(0,v.jsx)(l.default,{accessibilityHint:"collapse item",children:"-"})})}),(0,v.jsx)(o.default,{style:T.favorite,children:(0,v.jsx)(g.default,{onPress:function(){return a(t.id,!0)},children:(0,v.jsx)(l.default,{accessibilityHint:"Favorite Item",children:"!"})})})]})}q.propTypes={item:(0,y.shape)({}).isRequired,showImage:y.bool.isRequired,updateCollapsed:y.func.isRequired,updateFavorites:y.func.isRequired};var L=(0,r.memo)((function(e){var t=e.auction,i=e.location,s=e.updateCollapsed,u=e.updateFavorites,f=e.isCollapsed,c=(0,r.useState)(null),y=(0,a.default)(c,2),g=y[0],m=y[1],b=(0,r.useState)(!1),j=(0,a.default)(b,2),w=j[0],S=j[1],k=(0,r.useState)({}),O=(0,a.default)(k,2),I=O[0],R=O[1];(0,r.useEffect)((function(){if(!f){var e=function(){var e=(0,n.default)((function*(){h.default.post("https://www.bidrl.com/api/getitems",(0,C.toFormData)({auction_id:t.id,"filters[perpage]":t.item_count,item_type:"itemlist",lotnum:"",seqnum:"",close_groups:"",show_closed:"closed",perpetual:""})).then((function(e){console.log(e.data),m(e.data)}));var e=JSON.parse(yield p.default.getItem(x.itemBlacklistKey));R(e)}));return function(){return e.apply(this,arguments)}}();e()}}),[f]);var T=function(){var e=(0,n.default)((function*(e,n){var a=JSON.parse(yield p.default.getItem(x.itemBlacklistKey));null==a&&(a={}),void 0===a[i.id]&&(a[i.id]={}),void 0===a[i.id][t.id]&&(a[i.id][t.id]=[]),a[i.id][t.id]=a[i.id][t.id].filter((function(t){return t!==e})),n&&a[i.id][t.id].push(e),yield p.default.setItem(x.itemBlacklistKey,JSON.stringify(a)),R(a)}));return function(t,i){return e.apply(this,arguments)}}(),L=[];return null!==g&&(L=null==I||void 0===I[i.id]||void 0===I[i.id][t.id]?g.items:g.items.filter((function(e){return I[i.id][t.id].every((function(t){return t!==e.id}))}))),(0,v.jsxs)(o.default,{style:{borderColor:"black",borderWidth:"3px",borderRadius:"15px"},children:[(0,v.jsx)(d.default,{style:{backgroundColor:"gray"},onPress:function(){return S(!w)},children:(0,v.jsx)(l.default,{children:w?"hide images":"show images"})}),(0,v.jsx)(d.default,{onPress:function(){return s(t.id,!f)},children:(0,v.jsx)(l.default,{children:f?"Expand Auction":"Collapse Auction"})}),(0,v.jsx)(l.default,{style:{fontSize:18,textAlign:"center",color:K(new Date,new Date(t.ends))?"red":"black"},children:t.title}),!f&&(0,v.jsx)(o.default,{style:{flexDirection:"row",flexWrap:"wrap"},children:L.length>0?L.map((function(e){return(0,v.jsx)(q,{item:e,showImage:w,updateCollapsed:T,updateFavorites:u},e.id)})):(0,v.jsx)(l.default,{children:"Loading..."})})]})}));L.propTypes={auction:(0,y.shape)({id:y.string,item_count:y.string,title:y.string}).isRequired,location:(0,y.shape)({id:y.string}).isRequired,updateCollapsed:y.func.isRequired,updateFavorites:y.func.isRequired,isCollapsed:y.bool.isRequired};const D=L;var F=(0,r.memo)((function(e){var t=e.favorites,i=e.updateFavorites,n=(0,r.useState)([]),l=(0,a.default)(n,2),s=l[0],d=l[1];return(0,r.useEffect)((function(){h.default.all(t.map((function(e){return h.default.post("https://www.bidrl.com/api/ItemData",(0,C.toFormData)({item_id:e}))}))).then((function(e){d(e.map((function(e){return e.data})))}))}),[t]),(0,v.jsx)(o.default,{style:{flexDirection:"row",flexWrap:"wrap"},children:s.map((function(e){return(0,v.jsx)(q,{item:e,showImage:!0,updateCollapsed:function(e){return i(e,!1)},updateFavorites:function(){return null},updateFavoriteskey:e.id},e.id)}))})}));const J=F;function M(e){var t=e.location,i=e.endingToday,l=(0,r.useState)({}),s=(0,a.default)(l,2),d=s[0],u=s[1],f=(0,r.useState)({}),c=(0,a.default)(f,2),y=c[0],g=c[1],m=(0,r.useState)([]),b=(0,a.default)(m,2),j=b[0],w=b[1],k=S().addMessage;(0,r.useEffect)((function(){h.default.get("https://www.bidrl.com/api/landingPage/"+t.url).then(function(){var e=(0,n.default)((function*(e){var i;console.log(e.data);var n=Object.values(e.data.auctions).map((function(e){return e.id})),a=JSON.parse(null!=(i=yield p.default.getItem(x.auctionCollapsedKey))?i:"{}");null!=a&&void 0!==a[t.id]&&(a[t.id]=a[t.id].filter((function(e){return n.includes(e)})),yield p.default.setItem(x.auctionCollapsedKey,JSON.stringify(a))),g(a),u(e.data.auctions);var r=JSON.parse(yield p.default.getItem(x.favoritesKey));w(null==r?[]:r[t.id])}));return function(t){return e.apply(this,arguments)}}())}),[]);var C=(0,r.useCallback)(function(){var e=(0,n.default)((function*(e,i){var n=JSON.parse(yield p.default.getItem(x.auctionCollapsedKey));null==n&&(n={}),void 0===n[t.id]&&(n[t.id]=[]),n[t.id]=n[t.id].filter((function(t){return t!==e})),i&&n[t.id].push(e),yield p.default.setItem(x.auctionCollapsedKey,JSON.stringify(n)),g(n)}));return function(t,i){return e.apply(this,arguments)}}(),[y]),O=(0,r.useCallback)(function(){var e=(0,n.default)((function*(e,i){console.log("Adding "+e+" to favorites..."),k("Adding "+e+" to favorites...");var n=JSON.parse(yield p.default.getItem(x.favoritesKey));null==n&&(n={}),void 0===n[t.id]&&(n[t.id]=[]),n[t.id]=n[t.id].filter((function(t){return t!==e})),i&&n[t.id].push(e),yield p.default.setItem(x.favoritesKey,JSON.stringify(n)),w(n[t.id])}));return function(t,i){return e.apply(this,arguments)}}(),[j]),I=(0,r.useCallback)((function(e,t){return O(e,t)}),[]),R=Object.values(d);return R=i?R.filter((function(e){return K(new Date,new Date(e.ends))})):R,(0,v.jsxs)(o.default,{children:[(0,v.jsx)(J,{favorites:null==j?[]:j,updateFavorites:I}),R.map((function(e){var i;return(0,v.jsx)(D,{auction:e,location:t,updateCollapsed:C,updateFavorites:I,isCollapsed:null==(i=y[t.id])?void 0:i.includes(e.id)},e.id)}))]})}function N(){var e=(0,r.useState)([]),t=(0,a.default)(e,2),i=t[0],u=t[1],c=(0,r.useState)(!0),h=(0,a.default)(c,2),y=h[0],g=h[1];(0,r.useEffect)((function(){var e=function(){var e=(0,n.default)((function*(){var e=yield p.default.getItem(x.endingTodayKey);null!==e&&g(JSON.parse(e))}));return function(){return e.apply(this,arguments)}}();e()}),[]);var m=function(e){g(e),p.default.setItem(x.endingTodayKey,JSON.stringify(e))};return(0,v.jsx)(o.default,{style:f.body,children:(0,v.jsxs)(w,{children:[(0,v.jsxs)(l.default,{style:{fontSize:64,fontWeight:900},children:["BID",(0,v.jsx)("span",{style:{color:"GrayText"},children:"GL"})]}),(0,v.jsxs)(l.default,{children:[(0,v.jsx)("span",{style:{color:"GrayText"},children:"Good Luck"}),", losers!"]}),(0,v.jsxs)(o.default,{style:f.containerStyle,children:[(0,v.jsx)(b,{checkedAffiliates:i,updateCheckedAffiliates:u}),(0,v.jsxs)(o.default,{style:{flexDirection:"row",alignItems:"center"},children:[(0,v.jsx)(s.default,{value:y,onValueChange:m}),(0,v.jsx)(d.default,{onPress:function(){return m(!y)},children:(0,v.jsx)(l.default,{style:{color:y?"red":"black"},children:"Ending Today"})})]}),(0,v.jsx)(o.default,{children:i.map((function(e){return(0,v.jsxs)(o.default,{children:[(0,v.jsx)(l.default,{style:{textAlign:"center",fontSize:24},children:e.name}),(0,v.jsx)(M,{location:e,endingToday:y})]},e.id)}))})]}),(0,v.jsx)(k,{})]})})}F.propTypes={favorites:(0,y.arrayOf)(y.string.isRequired).isRequired,updateFavorites:y.func.isRequired},M.propTypes={location:(0,y.shape)({url:y.string}).isRequired,endingToday:y.bool.isRequired}}},t={};function i(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,i),r.exports}i.m=e,(()=>{var e=[];i.O=(t,n,a,r)=>{if(!n){var l=1/0;for(u=0;u<e.length;u++){for(var[n,a,r]=e[u],o=!0,s=0;s<n.length;s++)(!1&r||l>=r)&&Object.keys(i.O).every((e=>i.O[e](n[s])))?n.splice(s--,1):(o=!1,r<l&&(l=r));if(o){e.splice(u--,1);var d=a();void 0!==d&&(t=d)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,a,r]}})(),i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={179:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var a,r,[l,o,s]=n,d=0;if(l.some((t=>0!==e[t]))){for(a in o)i.o(o,a)&&(i.m[a]=o[a]);if(s)var u=s(i)}for(t&&t(n);d<l.length;d++)r=l[d],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(u)},n=self.webpackChunkweb=self.webpackChunkweb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=i.O(void 0,[11],(()=>i(422)));n=i.O(n)})();
//# sourceMappingURL=main.99516ed2.js.map