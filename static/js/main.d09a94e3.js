(()=>{"use strict";var e={3641:(e,t,i)=>{i.r(t),i.d(t,{default:()=>D});var n=i(885),a=i(5004),r=i(5326),l=i(1054),u=i(9385),o=i(6792);const s=o.default.create({body:{flex:1,backgroundColor:"#fff",alignItems:"center"},affiliateListStyle:{flexDirection:"row",flexWrap:"wrap",padding:10,gap:10},containerStyle:{alignItems:"center",maxWidth:700}});var d=i(5861),c=i(2982),f=i(519),p=i(3408),h=i(7773),y=i(2629);function g(e){var t=e.location,i=e.onLocationCheck,n=e.checkedAffiliates.some((function(e){return e.id===t.id}));return(0,y.jsx)(u.default,{children:(0,y.jsx)(r.default,{style:function(e){return[{backgroundColor:e.pressed?"rgb(210, 230, 255)":"white"}]},onPress:function(){i(t,!n)},children:(0,y.jsx)(l.default,{style:{color:n?"red":"black"},children:t.name})})})}g.propTypes={location:(0,h.shape)({}).isRequired,onLocationCheck:h.func.isRequired,checkedAffiliates:(0,h.arrayOf)((0,h.shape)({})).isRequired};const v={itemBlacklistKey:"item-blacklist",auctionBlacklistKey:"auction-blacklist",selectedLocationsKey:"selected-locations",affiliateListKey:"affiliate-list",favoritesKey:"favorites"};function m(e){var t=e.checkedAffiliates,i=e.updateCheckedAffiliates,r=(0,a.useState)([]),l=(0,n.default)(r,2),o=l[0],h=l[1],m=function(e,t){i((function(i){return function(e,t,i){var n=e;return i?e.every((function(e){return e.id!==t.id}))&&(n=[].concat((0,c.default)(e),[t])):n=e.filter((function(e){return e.id!==t.id})),f.default.setItem(v.selectedLocationsKey,JSON.stringify(n)),n}(i,e,t)}))};return(0,a.useEffect)((function(){var e=function(){var e=(0,d.default)((function*(){try{var e,t=yield f.default.getItem(v.affiliateListKey);null!=t?(e=JSON.parse(t),console.log("Found affiliates in data store!")):yield p.default.get("https://www.bidrl.com/api/auctionfields").then((function(t){e=t.data.affiliates.model,f.default.setItem(v.affiliateListKey,JSON.stringify(e))})),e.sort((function(e,t){return e.name.localeCompare(t.name)})),h(e)}catch(i){console.error(i)}}));return function(){return e.apply(this,arguments)}}();e();var t=function(){var e=(0,d.default)((function*(){var e=JSON.parse(yield f.default.getItem(v.selectedLocationsKey));null!==e&&i(e)}));return function(){return e.apply(this,arguments)}}();t()}),[]),(0,y.jsx)(u.default,{style:s.locationSelectionStyle,children:(0,y.jsx)(u.default,{style:s.affiliateListStyle,children:o.map((function(e){return(0,y.jsx)(g,{location:e,onLocationCheck:m,checkedAffiliates:t},e.id)}))})})}m.propTypes={checkedAffiliates:(0,h.arrayOf)((0,h.shape)({})).isRequired,updateCheckedAffiliates:h.func.isRequired};var x=(0,a.createContext)({message:null,addMessage:function(){},removeMessage:function(){}});function b(e){var t=e.children,i=(0,a.useState)(null),r=(0,n.default)(i,2),l=r[0],u=r[1];return(0,y.jsx)(x.Provider,{value:{message:l,addMessage:(0,a.useCallback)((function(e){return function(e){return u(e)}(e)}),[]),removeMessage:(0,a.useCallback)((function(){return u(null)}),[])},children:t})}b.propTypes={children:(0,h.arrayOf)((0,h.shape)({})).isRequired};var j=function(){var e=(0,a.useContext)(x);return{message:e.message,addMessage:e.addMessage,removeMessage:e.removeMessage}};function k(){var e=j(),t=e.message,i=e.removeMessage;console.log("Message of: "+t);var n=function(){var e=(0,d.default)((function*(){console.log("dismissing notif..."),i()}));return function(){return e.apply(this,arguments)}}();return t&&setTimeout(n,3e3),(0,y.jsx)(u.default,{style:{width:"100",height:"100"},children:(0,y.jsx)(l.default,{style:{position:"fixed"},children:t||""})})}var w=i(376),S=i(5288),O=i(5275),C=i(5722),R=i(736);const I=function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()};var q=o.default.create({card:{backgroundColor:"white",borderRadius:16,shadowOpacity:.2,shadowRadius:4,shadowColor:"black",shadowOffset:{height:0,width:0},elevation:1,marginVertical:10,marginHorizontal:10,width:"20%"},thumb:{height:130,borderTopLeftRadius:16,borderTopRightRadius:16,width:"100%"},infoContainer:{padding:16},name:{fontSize:18,fontWeight:"bold"},price:{fontSize:16,fontWeight:"600",marginBottom:8},hyperlinkStyle:{fontSize:22,color:"blue"},hide:{position:"absolute",width:"10%",right:0,backgroundColor:"red"},favorite:{position:"absolute",width:"10%",left:0,backgroundColor:"green"}});function B(e){var t=e.item,i=e.showImage,n=e.updateBlacklist,a=e.updateFavorites,o=t.item_url||t.url,s=new Date(1e3*(parseInt(t.end_time,10)-t.time_offset)),d=new Date,c=I(d,s);return(0,y.jsxs)(u.default,{style:q.card,children:[(0,y.jsx)(O.default,{style:q.thumb,source:{uri:i?t.images[0].thumb_url:""}}),(0,y.jsxs)(u.default,{children:[(0,y.jsx)(R.default,{onPress:function(){C.default.openURL(o)},children:(0,y.jsx)(l.default,{href:o,style:q.hyperlinkStyle,children:t.title})}),(0,y.jsxs)(l.default,{children:["Current Bid: $",t.current_bid]}),(0,y.jsx)(l.default,{style:{color:c?"red":"black"},children:s.toLocaleDateString()}),(0,y.jsx)(l.default,{children:s.toLocaleTimeString()})]}),(0,y.jsx)(u.default,{style:q.hide,children:(0,y.jsx)(r.default,{onPress:function(){return n(t.id,!0)},children:(0,y.jsx)(l.default,{accessibilityHint:"hide item",children:"X"})})}),(0,y.jsx)(u.default,{style:q.favorite,children:(0,y.jsx)(r.default,{onPress:function(){return a(t.id,!0)},children:(0,y.jsx)(l.default,{accessibilityHint:"Favorite Item",children:"!"})})})]})}B.propTypes={item:(0,h.shape)({}).isRequired,showImage:h.bool.isRequired,updateBlacklist:h.func.isRequired,updateFavorites:h.func.isRequired};var K=(0,a.memo)((function(e){var t=e.auction,i=e.location,r=e.updateBlacklist,o=e.updateFavorites,s=(0,a.useState)(null),c=(0,n.default)(s,2),h=c[0],g=c[1],m=(0,a.useState)(!1),x=(0,n.default)(m,2),b=x[0],j=x[1],k=(0,a.useState)({}),O=(0,n.default)(k,2),C=O[0],R=O[1];(0,a.useEffect)((function(){var e=function(){var e=(0,d.default)((function*(){p.default.post("https://www.bidrl.com/api/getitems",(0,w.toFormData)({auction_id:t.id,"filters[perpage]":t.item_count,item_type:"itemlist",lotnum:"",seqnum:"",close_groups:"",show_closed:"closed",perpetual:""})).then((function(e){console.log(e.data),g(e.data)}));var e=JSON.parse(yield f.default.getItem(v.itemBlacklistKey));R(e)}));return function(){return e.apply(this,arguments)}}();e()}),[]);var q=function(){var e=(0,d.default)((function*(e,n){var a=JSON.parse(yield f.default.getItem(v.itemBlacklistKey));null==a&&(a={}),void 0===a[i.id]&&(a[i.id]={}),void 0===a[i.id][t.id]&&(a[i.id][t.id]=[]),a[i.id][t.id]=a[i.id][t.id].filter((function(t){return t!==e})),n&&a[i.id][t.id].push(e),yield f.default.setItem(v.itemBlacklistKey,JSON.stringify(a)),R(a)}));return function(t,i){return e.apply(this,arguments)}}(),K=[];return null!==h&&(K=null==C||void 0===C[i.id]||void 0===C[i.id][t.id]?h.items:h.items.filter((function(e){return C[i.id][t.id].every((function(t){return t!==e.id}))}))),(0,y.jsxs)(u.default,{style:{borderColor:"black",borderWidth:"3px",borderRadius:"15px"},children:[(0,y.jsx)(S.default,{style:{backgroundColor:"gray"},onPress:function(){return j(!b)},children:(0,y.jsx)(l.default,{children:b?"hide images":"show images"})}),(0,y.jsx)(S.default,{onPress:function(){return r(t.id,!0)},children:(0,y.jsx)(l.default,{children:"Hide Auction"})}),(0,y.jsx)(l.default,{style:{fontSize:18,textAlign:"center",color:I(new Date,new Date(t.ends))?"red":"black"},children:t.title}),(0,y.jsx)(u.default,{style:{flexDirection:"row",flexWrap:"wrap"},children:K.length>0?K.map((function(e){return(0,y.jsx)(B,{item:e,showImage:b,updateBlacklist:q,updateFavorites:o},e.id)})):(0,y.jsx)(l.default,{children:"Loading..."})}),(0,y.jsx)(S.default,{onPress:function(){return r(t.id,!0)},children:(0,y.jsx)(l.default,{children:"Hide Above Auction"})})]})}));K.propTypes={auction:(0,h.shape)({title:h.string}).isRequired,location:(0,h.shape)({id:h.string}).isRequired,updateBlacklist:h.func.isRequired,updateFavorites:h.func.isRequired};const T=K;var L=(0,a.memo)((function(e){var t=e.favorites,i=e.updateFavorites,r=(0,a.useState)([]),l=(0,n.default)(r,2),o=l[0],s=l[1];return(0,a.useEffect)((function(){p.default.all(t.map((function(e){return p.default.post("https://www.bidrl.com/api/ItemData",(0,w.toFormData)({item_id:e}))}))).then((function(e){s(e.map((function(e){return e.data})))}))}),[t]),(0,y.jsx)(u.default,{style:{flexDirection:"row",flexWrap:"wrap"},children:o.map((function(e){return(0,y.jsx)(B,{item:e,showImage:!0,updateBlacklist:function(e){return i(e,!1)},updateFavorites:function(){return null},updateFavoriteskey:e.id},e.id)}))})}));const F=L;function A(e){var t=e.location,i=e.endingToday,r=(0,a.useState)({}),l=(0,n.default)(r,2),o=l[0],s=l[1],c=(0,a.useState)({}),h=(0,n.default)(c,2),g=h[0],m=h[1],x=(0,a.useState)([]),b=(0,n.default)(x,2),k=b[0],w=b[1],S=j().addMessage;(0,a.useEffect)((function(){p.default.get("https://www.bidrl.com/api/landingPage/"+t.url).then(function(){var e=(0,d.default)((function*(e){console.log(e.data);var i=Object.values(e.data.auctions).map((function(e){return e.id})),n=JSON.parse(yield f.default.getItem(v.itemBlacklistKey));if(null!=n&&void 0!==n[t.id]){var a={};n[t.id]=Object.keys(n[t.id]).filter((function(e){return i.includes(e)})).reduce((function(e,i){return a[i]=n[t.id][i],e}),{}),n[t.id]=a}yield f.default.setItem(v.itemBlacklistKey,JSON.stringify(n)),m(JSON.parse(yield f.default.getItem(v.auctionBlacklistKey))),s(e.data.auctions);var r=JSON.parse(yield f.default.getItem(v.favoritesKey));w(null==r?[]:r[t.id])}));return function(t){return e.apply(this,arguments)}}())}),[]);var O=(0,a.useCallback)(function(){var e=(0,d.default)((function*(e,i){var n=JSON.parse(yield f.default.getItem(v.auctionBlacklistKey));null==n&&(n={}),void 0===n[t.id]&&(n[t.id]=[]),n[t.id]=n[t.id].filter((function(t){return t!==e})),i&&n[t.id].push(e),yield f.default.setItem(v.auctionBlacklistKey,JSON.stringify(n)),m(n)}));return function(t,i){return e.apply(this,arguments)}}(),[g]),C=(0,a.useCallback)(function(){var e=(0,d.default)((function*(e,i){console.log("Adding "+e+" to favorites..."),S("Adding "+e+" to favorites...");var n=JSON.parse(yield f.default.getItem(v.favoritesKey));null==n&&(n={}),void 0===n[t.id]&&(n[t.id]=[]),n[t.id]=n[t.id].filter((function(t){return t!==e})),i&&n[t.id].push(e),yield f.default.setItem(v.favoritesKey,JSON.stringify(n)),w(n[t.id])}));return function(t,i){return e.apply(this,arguments)}}(),[k]),R=(0,a.useCallback)((function(e,t){return C(e,t)}),[]),q=Object.values(o),B=null!=g&&void 0!==g[t.id]?q.filter((function(e){return!g[t.id].includes(e.id)})):q;return B=i?B.filter((function(e){return I(new Date,new Date(e.ends))})):B,(0,y.jsxs)(u.default,{children:[(0,y.jsx)(F,{favorites:null==k?[]:k,updateFavorites:R}),B.map((function(e){return(0,y.jsx)(T,{auction:e,location:t,updateBlacklist:O,updateFavorites:R},e.id)}))]})}function D(){var e=(0,a.useState)([]),t=(0,n.default)(e,2),i=t[0],o=t[1],d=(0,a.useState)(!0),c=(0,n.default)(d,2),f=c[0],p=c[1];return(0,y.jsx)(u.default,{style:s.body,children:(0,y.jsxs)(b,{children:[(0,y.jsxs)(l.default,{style:{fontSize:64,fontWeight:900},children:["BID",(0,y.jsx)("span",{style:{color:"GrayText"},children:"GL"})]}),(0,y.jsxs)(l.default,{children:[(0,y.jsx)("span",{style:{color:"GrayText"},children:"Good Luck"}),", losers!"]}),(0,y.jsxs)(u.default,{style:s.containerStyle,children:[(0,y.jsx)(m,{checkedAffiliates:i,updateCheckedAffiliates:o}),(0,y.jsx)(r.default,{onPress:function(){return p(!f)},children:(0,y.jsx)(l.default,{style:{color:f?"red":"black"},children:"Ending Today"})}),(0,y.jsx)(u.default,{children:i.map((function(e){return(0,y.jsxs)(u.default,{children:[(0,y.jsx)(l.default,{style:{textAlign:"center",fontSize:24},children:e.name}),(0,y.jsx)(A,{location:e,endingToday:f})]},e.id)}))})]}),(0,y.jsx)(k,{})]})})}L.propTypes={favorites:(0,h.arrayOf)(h.string.isRequired).isRequired,updateFavorites:h.func.isRequired},A.propTypes={location:(0,h.shape)({url:h.string}).isRequired,endingToday:h.bool.isRequired}}},t={};function i(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,i),r.exports}i.m=e,(()=>{var e=[];i.O=(t,n,a,r)=>{if(!n){var l=1/0;for(d=0;d<e.length;d++){for(var[n,a,r]=e[d],u=!0,o=0;o<n.length;o++)(!1&r||l>=r)&&Object.keys(i.O).every((e=>i.O[e](n[o])))?n.splice(o--,1):(u=!1,r<l&&(l=r));if(u){e.splice(d--,1);var s=a();void 0!==s&&(t=s)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[n,a,r]}})(),i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={179:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var a,r,[l,u,o]=n,s=0;if(l.some((t=>0!==e[t]))){for(a in u)i.o(u,a)&&(i.m[a]=u[a]);if(o)var d=o(i)}for(t&&t(n);s<l.length;s++)r=l[s],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(d)},n=self.webpackChunkweb=self.webpackChunkweb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=i.O(void 0,[553],(()=>i(422)));n=i.O(n)})();
//# sourceMappingURL=main.d09a94e3.js.map